# ğŸ¯ ìŠ¤ë§ˆíŠ¸ ì‹œê°„ëŒ€ë³„ ë¶„ë°° ë¡œì§ (Smart Time Slot Distribution)

## ğŸ“‹ ê°œìš”

ê¸°ì¡´ì˜ ë‹¨ìˆœí•œ ìˆ˜í•™ì  ë¶„ë°°(1/3ì”©)ì—ì„œ **í˜¼ì¡ë„, ì¥ì†Œ íŠ¹ì„±, ì‹œê°„ëŒ€ ì í•©ì„±**ì„ ê³ ë ¤í•œ ì§€ëŠ¥í˜• ë¶„ë°° ì‹œìŠ¤í…œìœ¼ë¡œ ì§„í™”í–ˆìŠµë‹ˆë‹¤.

### í•µì‹¬ í˜ì‹  í¬ì¸íŠ¸

-   ğŸ•˜ **í˜¼ì¡ë„ ê¸°ë°˜ ì—­ì „**: ê´€ê´‘ëª…ì†Œê°€ ì˜¤ì „ì— í•œì í•˜ë©´ ì˜¤ì „ì— ìš°ì„  ë°°ì¹˜
-   ğŸ›ï¸ **ì´ë¦„ ê¸°ë°˜ ê°ì§€**: types ì •ë³´ ì—†ì–´ë„ ì¥ì†Œëª…ìœ¼ë¡œ ì¹´í…Œê³ ë¦¬ ìë™ ë¶„ë¥˜
-   ğŸŒ… **ì‹œê°„ëŒ€ë³„ íŠ¹ì„±í™”**: ì¹´í˜ëŠ” ì˜¤ì „, ê´€ê´‘ì§€ëŠ” í˜¼ì¡ë„ì— ë”°ë¼, ì•¼ê²½ì€ ì €ë…
-   âš¡ **ë™ì  ê· í˜• ì¡°ì •**: í•œ ì‹œê°„ëŒ€ê°€ ë„ˆë¬´ ë¹„ì§€ ì•Šë„ë¡ ìë™ ì¬ë¶„ë°°

---

## ğŸ”„ ì „ì²´ ì²˜ë¦¬ íë¦„

```mermaid
graph TD
    A[ìŠ¤íŒŸ ë¦¬ìŠ¤íŠ¸ ì…ë ¥] --> B[ê° ìŠ¤íŒŸë³„ ì‹œê°„ëŒ€ ì í•©ë„ ê³„ì‚°]
    B --> C[ì˜¤ì „ ì í•©ë„ ê³„ì‚°]
    B --> D[ì˜¤í›„ ì í•©ë„ ê³„ì‚°]
    B --> E[ì €ë… ì í•©ë„ ê³„ì‚°]

    C --> F[ê¸°ë³¸ íƒ€ì… ì ìˆ˜]
    C --> G[ì´ë¦„ ê¸°ë°˜ ê´€ê´‘ëª…ì†Œ ê°ì§€]
    C --> H[í˜¼ì¡ë„ ë³´ë„ˆìŠ¤ ê³„ì‚°]
    C --> I[í‚¤ì›Œë“œ ë§¤ì¹­ ë³´ë„ˆìŠ¤]

    D --> J[ì˜¤í›„ íƒ€ì… ì ìˆ˜]
    D --> K[ì˜¤í›„ í‚¤ì›Œë“œ ë³´ë„ˆìŠ¤]

    E --> L[ì €ë… íƒ€ì… ì ìˆ˜]
    E --> M[ì•¼ê²½ í‚¤ì›Œë“œ ë³´ë„ˆìŠ¤]
    E --> N[ì˜ì—…ì‹œê°„ ë³´ë„ˆìŠ¤]

    F --> O[ìµœì¢… ì˜¤ì „ ì ìˆ˜]
    G --> O
    H --> O
    I --> O

    J --> P[ìµœì¢… ì˜¤í›„ ì ìˆ˜]
    K --> P

    L --> Q[ìµœì¢… ì €ë… ì ìˆ˜]
    M --> Q
    N --> Q

    O --> R[ì‹œê°„ëŒ€ë³„ ë¶„ë¥˜]
    P --> R
    Q --> R

    R --> S[ê· í˜• ì¡°ì •]
    S --> T[ìµœì¢… ë¶„ë°° ê²°ê³¼]
```

---

## ğŸŒ… ì˜¤ì „ ì í•©ë„ ê³„ì‚° ë¡œì§

### 1. ê¸°ë³¸ íƒ€ì… ì ìˆ˜

```python
morning_types = {
    "cafe": 3.0,           # ì¹´í˜ ìµœìš°ì„ 
    "bakery": 2.5,         # ë² ì´ì»¤ë¦¬
    "museum": 2.5,         # ë°•ë¬¼ê´€ (ì¡°ìš©í•œ ê´€ëŒ)
    "park": 2.5,           # ê³µì› (ì‚°ì±…)
    "art_gallery": 2.5,    # ë¯¸ìˆ ê´€ (ì¡°ìš©í•œ ê´€ëŒ)
    "tourist_attraction": 1.8,  # ê´€ê´‘ëª…ì†Œ (í˜¼ì¡ë„ë¡œ ì—­ì „ ê°€ëŠ¥)
    "landmark": 1.5,       # ëœë“œë§ˆí¬ (í˜¼ì¡ë„ë¡œ ì—­ì „ ê°€ëŠ¥)
    "viewpoint": 1.8,      # ì „ë§ëŒ€ (í˜¼ì¡ë„ë¡œ ì—­ì „ ê°€ëŠ¥)
}
```

### 2. ì´ë¦„ ê¸°ë°˜ ê´€ê´‘ëª…ì†Œ ê°ì§€ (types ì—†ì„ ë•Œ)

```python
tourist_name_patterns = [
    "íƒ€ì›Œ", "tower", "ì „ë§ëŒ€", "observatory", "ìŠ¤ì¹´ì´", "sky",
    "ë°•ë¬¼ê´€", "museum", "ë¯¸ìˆ ê´€", "gallery",
    "ê¶", "palace", "ì„±", "castle", "í•œì˜¥", "hanok",
    "ëª…ì†Œ", "attraction", "ê´€ê´‘", "tourist", "ëœë“œë§ˆí¬", "landmark"
]
# ë§¤ì¹­ì‹œ +1.8ì  ì¶”ê°€
```

### 3. í˜¼ì¡ë„ ë³´ë„ˆìŠ¤ (í•µì‹¬ í˜ì‹ !)

```python
# ì˜¤ì „ í˜¼ì¡ë„ê°€ ìƒëŒ€ì ìœ¼ë¡œ ë‚®ì„ ë•Œ ë³´ë„ˆìŠ¤
congestion_diff = (max_congestion - morning_congestion) / max_congestion
multiplier = 4.0 if is_tourist_spot else 1.5  # ê´€ê´‘ëª…ì†ŒëŠ” 4ë°°!
bonus = congestion_diff * multiplier
```

**ì˜ˆì‹œ:**

-   ë‚¨ì‚°íƒ€ì›Œ ì˜¤ì „ í˜¼ì¡ë„: 25, ì˜¤í›„ í˜¼ì¡ë„: 85
-   í˜¼ì¡ë„ ì°¨ì´: (85-25)/85 = 0.71
-   ê´€ê´‘ëª…ì†Œ ë³´ë„ˆìŠ¤: 0.71 Ã— 4.0 = **+2.84ì **
-   ê²°ê³¼: ì˜¤ì „ ë°°ì¹˜ ìš°ì„ ìˆœìœ„ â¬†ï¸

### 4. í‚¤ì›Œë“œ ë§¤ì¹­ ë³´ë„ˆìŠ¤

```python
morning_keywords = [
    "ì¹´í˜", "cafe", "ê³µì›", "park", "ë°•ë¬¼ê´€", "museum",
    "ì „ë§ëŒ€", "observatory", "íƒ€ì›Œ", "tower", "ê¶", "palace",
    "ì •ì›", "garden", "ì‚°ì±…ë¡œ", "walkway"
]
# ê° í‚¤ì›Œë“œ ë§¤ì¹­ì‹œ +1.0ì 
```

---

## ğŸŒ ì˜¤í›„ ì í•©ë„ ê³„ì‚° ë¡œì§

### ê¸°ë³¸ íƒ€ì… ì ìˆ˜

```python
afternoon_types = {
    "tourist_attraction": 3.0,  # ê´€ê´‘ëª…ì†Œ ìš°ì„ 
    "shopping_mall": 2.5,       # ì‡¼í•‘ëª°
    "amusement_park": 3.0,      # ë†€ì´ê³µì›
    "monument": 2.0,            # ê¸°ë…ë¬¼
    "landmark": 2.3,            # ëœë“œë§ˆí¬ (ì•¼ê²½ ê³ ë ¤í•´ ì•½ê°„ ë‚®ì¶¤)
    "stadium": 2.0,             # ê²½ê¸°ì¥
    "beach": 2.5,               # í•´ë³€
    "viewpoint": 2.0,           # ì „ë§ëŒ€ (ì•¼ê²½ ê³ ë ¤í•´ ë‚®ì¶¤)
}
```

### í‚¤ì›Œë“œ ë§¤ì¹­

```python
afternoon_keywords = [
    "íƒ€ì›Œ", "tower", "ì‡¼í•‘", "shopping",
    "ê´€ê´‘", "ëª…ì†Œ", "ëœë“œë§ˆí¬"
]
```

---

## ğŸŒƒ ì €ë… ì í•©ë„ ê³„ì‚° ë¡œì§

### 1. ê¸°ë³¸ íƒ€ì… ì ìˆ˜

```python
evening_types = {
    "restaurant": 3.0,          # ë ˆìŠ¤í† ë‘ ìµœìš°ì„ 
    "bar": 3.0,                 # ë°”
    "night_club": 3.0,          # ë‚˜ì´íŠ¸í´ëŸ½
    "food": 2.5,                # ìŒì‹ì 
    "movie_theater": 2.5,       # ì˜í™”ê´€
    # ì•¼ê²½ ëª…ì†Œë“¤
    "viewpoint": 2.8,           # ì „ë§ëŒ€ ì•¼ê²½
    "tourist_attraction": 2.3,   # ê´€ê´‘ëª…ì†Œ ì•¼ê²½
    "landmark": 2.5,            # ëœë“œë§ˆí¬ ì•¼ê²½
    "bridge": 2.5,              # ë‹¤ë¦¬ ì•¼ê²½
    "park": 2.0,                # ê³µì› ì•¼ê²½ ì‚°ì±…
}
```

### 2. ì•¼ê²½ í‚¤ì›Œë“œ íŠ¹ë³„ ë³´ë„ˆìŠ¤

```python
evening_keywords = [
    # ê¸°ë³¸ ì €ë… í‚¤ì›Œë“œ
    "ë ˆìŠ¤í† ë‘", "restaurant", "ë°”", "bar", "ë§›ì§‘",
    # ì•¼ê²½ íŠ¹í™” í‚¤ì›Œë“œ
    "ì•¼ê²½", "night view", "nightview", "íƒ€ì›Œ", "tower",
    "ì „ë§ëŒ€", "observatory", "ë£¨í”„íƒ‘", "rooftop", "ìŠ¤ì¹´ì´", "sky",
    "ë‹¤ë¦¬", "bridge", "í•œê°•", "river", "ë·°", "view",
    "ì¼ëª°", "sunset", "ì¡°ëª…", "lighting", "ë¼ì´íŠ¸ì—…"
]
```

### 3. ì•¼ê²½ ëª…ì†Œ íŠ¹ë³„ ë³´ë„ˆìŠ¤

```python
# íƒ€ì›Œ/ì „ë§ëŒ€: +2.0ì 
if any(keyword in name for keyword in ["íƒ€ì›Œ", "tower", "ì „ë§ëŒ€", "ìŠ¤ì¹´ì´", "sky"]):
    score += 2.0

# ê°•ë³€/ë‹¤ë¦¬: +1.5ì 
if any(keyword in name for keyword in ["í•œê°•", "ë‹¤ë¦¬", "bridge", "river"]):
    score += 1.5

# ê³µì› ì•¼ê²½ ì‚°ì±…: +1.0ì 
if any(park_type in types for park_type in ["park", "garden"]):
    score += 1.0
```

### 4. ì˜ì—…ì‹œê°„ ë³´ë„ˆìŠ¤

```python
# 8ì‹œ ì´í›„ê¹Œì§€ ìš´ì˜í•˜ëŠ” ê³³ +1.5ì 
if close_time >= "20:00:00":
    score += 1.5
```

---

## ğŸ² í˜„ì‹¤ì ì¸ í˜¼ì¡ë„ íŒ¨í„´ ìƒì„±

### ì¥ì†Œ íƒ€ì…ë³„ ì°¨ë³„í™”ëœ í˜¼ì¡ë„

```python
# ê´€ê´‘ëª…ì†Œ: ì˜¤ì „ í•œì  â†’ ì˜¤í›„ í­ì£¼
tourist_pattern = [10,8,5,3,5,8,15,20,25,30,35,40,80,90,95,90,85,70,50,40,30,25,20,15]

# ì¹´í˜: ì˜¤ì „/ì˜¤í›„ í”¼í¬
cafe_pattern = [10,8,5,5,8,15,25,50,70,80,75,65,45,40,60,70,65,50,35,25,20,15,12,10]

# ë ˆìŠ¤í† ë‘: ì ì‹¬/ì €ë… í”¼í¬
restaurant_pattern = [5,3,2,2,3,5,10,15,20,25,30,60,80,70,50,40,45,55,85,90,80,60,40,20]

# ê³µì›: ì˜¤í›„/ì €ë… ì‚°ì±… í”¼í¬
park_pattern = [5,3,2,2,3,8,15,25,30,35,40,45,50,55,60,70,75,70,65,80,70,50,30,15]
```

---

## âš–ï¸ ê· í˜• ì¡°ì • ë©”ì»¤ë‹ˆì¦˜

### ìµœì†Œ ë³´ì¥ ì‹œìŠ¤í…œ

```python
target_per_slot = total_spots // 3
min_per_slot = max(1, target_per_slot // 2)  # ìµœì†Œ ë³´ì¥ ê°œìˆ˜

# ë¶€ì¡±í•œ ì‹œê°„ëŒ€ê°€ ìˆìœ¼ë©´ ë‹¤ë¥¸ ì‹œê°„ëŒ€ì—ì„œ ì´ë™
if len(slot_spots) < min_per_slot:
    # ê°€ì¥ ë§ì€ ì‹œê°„ëŒ€ì—ì„œ ì¼ë¶€ ìŠ¤íŒŸ ì´ë™
    move_spots_from_abundant_to_sparse()
```

---

## ğŸ“Š ì‹¤ì œ ê²°ê³¼ ì˜ˆì‹œ

### Before (ë‹¨ìˆœ 1/3 ë¶„ë°°)

```
ì˜¤ì „: ì¹´í˜, ì¹´í˜, ì¹´í˜, ì¹´í˜, ì¹´í˜, ì¹´í˜, ì¹´í˜, ì¹´í˜ (8ê°œ)
ì˜¤í›„: íƒ€ì›Œ, ë°•ë¬¼ê´€, ì‡¼í•‘ëª°, ê´€ê´‘ì§€, ê³µì›, ëª…ì†Œ, ì „ë§ëŒ€, ëœë“œë§ˆí¬ (8ê°œ)
ì €ë…: ë ˆìŠ¤í† ë‘, ë°”, ì•¼ê²½ì§€, ê³µì›, ë‹¤ë¦¬, ê°•ë³€, ë£¨í”„íƒ‘, í´ëŸ½ (8ê°œ)
```

### After (ìŠ¤ë§ˆíŠ¸ ë¶„ë°°)

```
ì˜¤ì „: ì¹´í˜(3), ë°•ë¬¼ê´€(2), ì „ë§ëŒ€(2), ê³µì›(1) (8ê°œ)
      â†³ ì „ë§ëŒ€ì™€ ë°•ë¬¼ê´€ì´ ì˜¤ì „ í˜¼ì¡ë„ ë‚®ì•„ì„œ ë°°ì¹˜ë¨!

ì˜¤í›„: ì‡¼í•‘ëª°(3), ë†€ì´ê³µì›(2), ê´€ê´‘ëª…ì†Œ(3) (8ê°œ)
      â†³ í™œë™ì ì¸ ê´€ê´‘ì§€ë“¤ì´ ì˜¤í›„ì— ì§‘ì¤‘

ì €ë…: ë ˆìŠ¤í† ë‘(4), ì•¼ê²½ëª…ì†Œ(3), ë°”/í´ëŸ½(1) (8ê°œ)
      â†³ ë‚¨ì‚°íƒ€ì›Œ, í•œê°•ë‹¤ë¦¬ ë“± ì•¼ê²½ ëª…ì†Œë“¤ì´ ì €ë…ì— ìµœì í™”
```

---

## ğŸ”§ ì„¤ì • ê°€ëŠ¥í•œ íŒŒë¼ë¯¸í„°

| íŒŒë¼ë¯¸í„°                        | ê¸°ë³¸ê°’     | ì„¤ëª…                         |
| ------------------------------- | ---------- | ---------------------------- |
| `tourist_congestion_multiplier` | 4.0        | ê´€ê´‘ëª…ì†Œ í˜¼ì¡ë„ ë³´ë„ˆìŠ¤ ë°°ìˆ˜  |
| `normal_congestion_multiplier`  | 1.5        | ì¼ë°˜ ì¥ì†Œ í˜¼ì¡ë„ ë³´ë„ˆìŠ¤ ë°°ìˆ˜ |
| `morning_tourist_base_score`    | 1.8        | ê´€ê´‘ëª…ì†Œ ì˜¤ì „ ê¸°ë³¸ ì ìˆ˜      |
| `evening_tower_bonus`           | 2.0        | íƒ€ì›Œ ì•¼ê²½ íŠ¹ë³„ ë³´ë„ˆìŠ¤        |
| `evening_bridge_bonus`          | 1.5        | ë‹¤ë¦¬ ì•¼ê²½ ë³´ë„ˆìŠ¤             |
| `min_spots_per_slot`            | `total//6` | ì‹œê°„ëŒ€ë³„ ìµœì†Œ ë³´ì¥ ê°œìˆ˜      |

---

## ğŸ¯ ê²°ë¡ 

ì´ì œ **"í˜¼ì¡í•˜ì§€ ì•Šì€ ì˜¤ì „ì— ê´€ê´‘ì§€ ê°€ê³ ì‹¶ì–´"** ê°™ì€ ì‚¬ìš©ì ìš”ì²­ì´ ì •í™•íˆ ë°˜ì˜ë©ë‹ˆë‹¤!

-   âœ… ê´€ê´‘ëª…ì†Œê°€ ì˜¤ì „ì— í•œì í•˜ë©´ â†’ ì˜¤ì „ ë°°ì¹˜
-   âœ… ì¹´í˜ëŠ” ì—¬ì „íˆ ì˜¤ì „ ìš°ì„ ì´ì§€ë§Œ ë…ì í•˜ì§€ ì•ŠìŒ
-   âœ… ì•¼ê²½ ëª…ì†ŒëŠ” ì €ë…ì— ìë™ ë°°ì¹˜
-   âœ… ë™ì  ê· í˜•ìœ¼ë¡œ í•œ ì‹œê°„ëŒ€ê°€ ë¹„ì§€ ì•ŠìŒ

**ì‚¬ìš©ì ì¤‘ì‹¬ì˜ ì§€ëŠ¥í˜• ì—¬í–‰ ì¶”ì²œ ì‹œìŠ¤í…œ ì™„ì„±!** ğŸ‰
